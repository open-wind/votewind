import{a as t}from"./chunk-KLPRJ6SC.js";import{h as n,i as a}from"./chunk-4PT23TTH.js";import{a as r,b as o,d as s}from"./chunk-I4JBCTLR.js";import{a as e}from"./chunk-MCEXFPZL.js";import{a as i}from"./chunk-BOXFFUY5.js";import{e as l}from"./chunk-OVZZEY7C.js";var h=Math.cos,u=Math.sin,g=Math.sqrt,c={};c.computePosition=function(t,n,a,r,o,s,e){let i=n.radiiSquared,c=t.nwCorner,C=t.boundingRectangle,S=c.latitude-t.granYCos*r+o*t.granXSin,d=h(S),w=u(S),m=i.z*w,p=c.longitude+r*t.granYSin+o*t.granXCos,X=d*h(p),Y=d*u(p),O=i.x*X,f=i.y*Y,_=g(O*X+f*Y+m*w);if(s.x=O/_,s.y=f/_,s.z=m/_,a){let n=t.stNwCorner;l(n)?(S=n.latitude-t.stGranYCos*r+o*t.stGranXSin,p=n.longitude+r*t.stGranYSin+o*t.stGranXCos,e.x=(p-t.stWest)*t.lonScalar,e.y=(S-t.stSouth)*t.latScalar):(e.x=(p-C.west)*t.lonScalar,e.y=(S-C.south)*t.latScalar)}};var C=new a,S=new r,d=new o,w=new r,m=new t;function p(t,n,o,e,i,l,h){let u=Math.cos(n),g=e*u,c=o*u,d=Math.sin(n),p=e*d,X=o*d;m._ellipsoid=s.default,S=m.project(t,S),S=r.subtract(S,w,S);let Y=a.fromRotation(n,C);S=a.multiplyByVector(Y,S,S),S=r.add(S,w,S),t=m.unproject(S,t),l-=1,h-=1;let O=t.latitude,f=O+l*X,_=O-g*h,M=O-g*h+l*X,P=Math.max(O,f,_,M),R=Math.min(O,f,_,M),T=t.longitude,I=T+l*c,W=T+h*p,j=T+h*p+l*c;return{north:P,south:R,east:Math.max(T,I,W,j),west:Math.min(T,I,W,j),granYCos:g,granYSin:p,granXCos:c,granXSin:X,nwCorner:t}}c.computeOptions=function(t,a,r,o,l,h,u){let g=t.east,c=t.west,C=t.north,S=t.south,X=!1,Y=!1;C===e.PI_OVER_TWO&&(X=!0),S===-e.PI_OVER_TWO&&(Y=!0);let O,f=C-S,_=Math.ceil((O=c>g?e.TWO_PI-c+g:g-c)/a)+1,M=Math.ceil(f/a)+1,P=O/(_-1),R=f/(M-1),T=n.northwest(t,h),I=n.center(t,d);(0!==r||0!==o)&&(I.longitude<T.longitude&&(I.longitude+=e.TWO_PI),m._ellipsoid=s.default,w=m.project(I,w));let W=n.clone(t,l),j={granYCos:R,granYSin:0,granXCos:P,granXSin:0,nwCorner:T,boundingRectangle:W,width:_,height:M,northCap:X,southCap:Y};if(0!==r){let t=p(T,r,P,R,I,_,M);if(C=t.north,S=t.south,g=t.east,c=t.west,C<-e.PI_OVER_TWO||C>e.PI_OVER_TWO||S<-e.PI_OVER_TWO||S>e.PI_OVER_TWO)throw new i("Rotated rectangle is invalid.  It crosses over either the north or south pole.");j.granYCos=t.granYCos,j.granYSin=t.granYSin,j.granXCos=t.granXCos,j.granXSin=t.granXSin,W.north=C,W.south=S,W.east=g,W.west=c}if(0!==o){r-=o;let t=n.northwest(W,u),a=p(t,r,P,R,I,_,M);j.stGranYCos=a.granYCos,j.stGranXCos=a.granXCos,j.stGranYSin=a.granYSin,j.stGranXSin=a.granXSin,j.stNwCorner=t,j.stWest=a.west,j.stSouth=a.south}return j};var X=c;export{X as a};