import{a as t,b as a,d as i}from"./chunk-I4JBCTLR.js";import{a as e}from"./chunk-MCEXFPZL.js";import{b as n}from"./chunk-BOXFFUY5.js";import{e as s}from"./chunk-OVZZEY7C.js";function h(t,a,i,e,n,s,h){let r=t*i*(4+t*(4-3*i))/16;return(1-r)*t*a*(e+r*n*(h+r*s*(2*h*h-1)))}var r=new t,d=new t;function o(i,s,o,u){let c,l,M,_,g,p,f,m,v,O,H,b,q,S,U,w,A,R,P,j,y,C,E,F,T=t.normalize(u.cartographicToCartesian(s,d),r),k=t.normalize(u.cartographicToCartesian(o,d),d);n.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(t.angleBetween(T,k))-Math.PI),.0125),function(t,a,i,n,s,r,d){let o=(a-i)/a,u=r-n,c=Math.atan((1-o)*Math.tan(s)),l=Math.atan((1-o)*Math.tan(d)),M=Math.cos(c),_=Math.sin(c),g=Math.cos(l),p=Math.sin(l),f=M*g,m=M*p,v=_*p,O=_*g,H=u,b=e.TWO_PI,q=Math.cos(H),S=Math.sin(H),U,w,A,R,P;do{let t;q=Math.cos(H),S=Math.sin(H);let a=m-O*q;U=Math.atan2(A=Math.sqrt(g*g*S*S+a*a),w=v+f*q),0===A?(t=0,R=1):R=1-(t=f*S/A)*t,b=H,isFinite(P=w-2*v/R)||(P=0),H=u+h(o,t,R,U,A,w,P)}while(Math.abs(H-b)>e.EPSILON12);let j=R*(a*a-i*i)/(i*i),y=j*(256+j*(j*(74-47*j)-128))/1024,C=P*P,E=i*(1+j*(4096+j*(j*(320-175*j)-768))/16384)*(U-y*A*(P+y*(w*(2*C-1)-y*P*(4*A*A-3)*(4*C-3)/6)/4)),F=Math.atan2(g*S,m-O*q),T=Math.atan2(M*S,m*q-O);t._distance=E,t._startHeading=F,t._endHeading=T,t._uSquared=j}(i,u.maximumRadius,u.minimumRadius,s.longitude,s.latitude,o.longitude,o.latitude),i._start=a.clone(s,i._start),i._end=a.clone(o,i._end),i._start.height=0,i._end.height=0,c=i._uSquared,_=((l=i._ellipsoid.maximumRadius)-(M=i._ellipsoid.minimumRadius))/l,g=Math.cos(i._startHeading),p=Math.sin(i._startHeading),v=(m=1/Math.sqrt(1+(f=(1-_)*Math.tan(i._start.latitude))*f))*f,O=Math.atan2(f,g),S=Math.sqrt(q=1-(b=(H=m*p)*H)),A=(w=(U=c/4)*U)*U,R=w*w,P=1+U-3*w/4+5*A/4-175*R/64,j=1-U+15*w/8-35*A/8,y=1-3*U+35*w/4,C=1-5*U,E=P*O-j*Math.sin(2*O)*U/2-y*Math.sin(4*O)*w/16-C*Math.sin(6*O)*A/48-5*Math.sin(8*O)*R/512,(F=i._constants).a=l,F.b=M,F.f=_,F.cosineHeading=g,F.sineHeading=p,F.tanU=f,F.cosineU=m,F.sineU=v,F.sigma=O,F.sineAlpha=H,F.sineSquaredAlpha=b,F.cosineSquaredAlpha=q,F.cosineAlpha=S,F.u2Over4=U,F.u4Over16=w,F.u6Over64=A,F.u8Over256=R,F.a0=P,F.a1=j,F.a2=y,F.a3=C,F.distanceRatio=E}function u(t,e,n){let h=n??i.default;this._ellipsoid=h,this._start=new a,this._end=new a,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,s(t)&&s(e)&&o(this,t,e,h)}Object.defineProperties(u.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return n.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return n.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return n.defined("distance",this._distance),this._endHeading}}}),u.prototype.setEndPoints=function(t,a){n.defined("start",t),n.defined("end",a),o(this,t,a,this._ellipsoid)},u.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},u.prototype.interpolateUsingSurfaceDistance=function(t,i){n.defined("distance",this._distance);let e=this._constants,r=e.distanceRatio+t/e.b,d=Math.cos(2*r),o=Math.cos(4*r),u=Math.cos(6*r),c=Math.sin(2*r),l=Math.sin(4*r),M=Math.sin(6*r),_=Math.sin(8*r),g=r*r,p=e.u8Over256,f=e.u2Over4,m=e.u6Over64,v=e.u4Over16,O=r*g*2*p*d/3+r*(1-f+7*v/4-15*m/4+579*p/64-(v-15*m/4+187*p/16)*d-(5*m/4-115*p/16)*o-29*p*u/16)+(f/2-v+71*m/32-85*p/16)*c+(5*v/16-5*m/4+383*p/96)*l-g*((m-11*p/2)*c+5*p*l/2)+(29*m/96-29*p/16)*M+539*p*_/1536,H=Math.asin(Math.sin(O)*e.cosineAlpha),b=Math.atan(e.a/e.b*Math.tan(H));O-=e.sigma;let q=Math.cos(2*e.sigma+O),S=Math.sin(O),U=Math.cos(O),w=e.cosineU*U,A=e.sineU*S,R=Math.atan2(S*e.sineHeading,w-A*e.cosineHeading)-h(e.f,e.sineAlpha,e.cosineSquaredAlpha,O,S,U,q);return s(i)?(i.longitude=this._start.longitude+R,i.latitude=b,i.height=0,i):new a(this._start.longitude+R,b,0)};var c=u;export{c as a};